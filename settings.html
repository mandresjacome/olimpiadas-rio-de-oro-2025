<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuraci√≥n y Mantenimiento - Sistema de Nataci√≥n</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 15px rgba(156,39,176,0.4); }
            50% { transform: scale(1.05); box-shadow: 0 6px 25px rgba(255,64,129,0.6); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>‚öôÔ∏è Configuraci√≥n y Mantenimiento</h1>
        <p>Configuraci√≥n inicial del sistema y gesti√≥n de datos</p>
    </div>

    <div class="container">
        <!-- Navigation Menu -->
        <div class="nav-menu">
            <a href="index.html" class="nav-btn">
                üìã Dashboard
            </a>
            <a href="control-panel.html" class="nav-btn">
                ‚öôÔ∏è Panel de Control
            </a>
            <a href="public-view.html" class="nav-btn success">
                üìä Resultados P√∫blicos
            </a>
        </div>

        <!-- Panel de Configuraci√≥n -->
        <div class="card" style="background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-left: 5px solid #4CAF50;">
            <div class="card-header" style="background: transparent; border-bottom: 2px solid #4CAF50;">
                <h2 style="color: #2E7D32;">üí° Gu√≠a de Configuraci√≥n del Evento</h2>
            </div>
            <div style="padding: 20px;">
                <p style="font-size: 1.1em; margin-bottom: 20px; color: #1B5E20;">
                    <strong>Bienvenido al Panel de Configuraci√≥n</strong> - Aqu√≠ puedes preparar todo para las Olimpiadas R√≠o de Oro 2025
                </p>

                <!-- Botones de Acci√≥n R√°pida -->
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 3px solid #4CAF50;">
                    <h3 style="color: #2E7D32; margin-top: 0; text-align: center;">üöÄ Acciones R√°pidas</h3>
                    <div style="display: grid; gap: 15px;">
                        <!-- Configurar Todo -->
                        <div style="background: linear-gradient(135deg, #F3E5F5, #E1BEE7); padding: 15px; border-radius: 8px; border-left: 5px solid #9C27B0;">
                            <button onclick="configurarEventoCompleto()" style="width: 100%; background: linear-gradient(135deg, #FF4081, #9C27B0); color: white; font-weight: bold; font-size: 1.1em; padding: 15px 25px; border: none; border-radius: 8px; cursor: pointer; box-shadow: 0 4px 15px rgba(156,39,176,0.4); animation: pulse 2s infinite; margin-bottom: 10px;">
                                ‚ö° CONFIGURAR TODO AUTOM√ÅTICAMENTE ‚ö°
                            </button>
                            <p style="margin: 5px 0; line-height: 1.6; color: #4A148C;">
                                <strong>¬øPrimera vez?</strong> Este bot√≥n crea autom√°ticamente:
                            </p>
                            <ul style="margin: 5px 0; padding-left: 20px; line-height: 1.6; color: #6A1B9A;">
                                <li>9 categor√≠as est√°ndar (Pre-Infantil A, B, Infantil A, B, Juvenil A, B, C, Mayores, M√°ster)</li>
                                <li>27 eventos/pruebas de nataci√≥n (50m, 100m, 200m en todos los estilos)</li>
                            </ul>
                            <p style="margin: 5px 0; color: #D32F2F; font-weight: bold;">‚ö†Ô∏è Solo √∫salo una vez al inicio!</p>
                        </div>

                        <!-- Generar Datos -->
                        <div style="background: linear-gradient(135deg, #F3E5F5, #E1BEE7); padding: 15px; border-radius: 8px; border-left: 5px solid #9C27B0;">
                            <button onclick="generateTestData()" style="width: 100%; background: #9C27B0; color: white; font-weight: bold; font-size: 1.05em; padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; box-shadow: 0 3px 10px rgba(156,39,176,0.3); margin-bottom: 10px;">
                                üé≤ Generar Datos Completos
                            </button>
                            <p style="margin: 5px 0; line-height: 1.6; color: #4A148C;">
                                <strong>Para pruebas:</strong> Genera datos de ejemplo completos incluyendo:
                            </p>
                            <ul style="margin: 5px 0; padding-left: 20px; line-height: 1.6; color: #6A1B9A;">
                                <li>96 participantes de muestra con nombres realistas</li>
                                <li>Inscripciones autom√°ticas en las pruebas</li>
                                <li>Resultados simulados para hacer pruebas</li>
                            </ul>
                            <p style="margin: 5px 0; color: #FF6F00; font-weight: bold;">üí° √ötil para probar el sistema antes del evento real</p>
                        </div>

                        <!-- Limpiar Todo -->
                        <div style="background: linear-gradient(135deg, #FFEBEE, #FFCDD2); padding: 15px; border-radius: 8px; border-left: 5px solid #D32F2F;">
                            <button onclick="clearAllData()" style="width: 100%; background: #D32F2F; color: white; font-weight: bold; font-size: 1.05em; padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; box-shadow: 0 3px 10px rgba(211,47,47,0.3); margin-bottom: 10px;">
                                üóëÔ∏è Limpiar Todo
                            </button>
                            <p style="margin: 5px 0; line-height: 1.6; color: #B71C1C;">
                                <strong>¬°PELIGRO!</strong> Elimina TODA la informaci√≥n:
                            </p>
                            <ul style="margin: 5px 0; padding-left: 20px; line-height: 1.6; color: #C62828;">
                                <li>Todas las categor√≠as</li>
                                <li>Todos los eventos/pruebas</li>
                                <li>Todos los participantes</li>
                                <li>Todas las inscripciones y resultados</li>
                            </ul>
                            <p style="margin: 5px 0; color: #D32F2F; font-weight: bold;">‚ö†Ô∏è ESTA ACCI√ìN NO SE PUEDE DESHACER - √ösalo solo si quieres empezar de cero</p>
                        </div>

                        <!-- Backup/Restore -->
                        <div style="background: linear-gradient(135deg, #E3F2FD, #BBDEFB); padding: 15px; border-radius: 8px; border-left: 5px solid #2196F3;">
                            <h4 style="margin: 0 0 10px 0; color: #1976D2;">üíæ Backup y Restauraci√≥n</h4>
                            <div style="display: grid; gap: 10px;">
                                <button onclick="DataExporter.exportJSON()" class="btn" style="background: #2196F3; color: white;">
                                    üì• Exportar Backup (JSON)
                                </button>
                                <button onclick="showImportModal()" class="btn" style="background: #1976D2; color: white;">
                                    üì§ Importar Backup
                                </button>
                            </div>
                            <p style="margin: 10px 0 0 0; line-height: 1.6; color: #0D47A1; font-size: 0.9em;">
                                <strong>Tip:</strong> Haz backups regulares para no perder informaci√≥n importante
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Gu√≠a de Uso -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                    <!-- Categor√≠as -->
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #2196F3;">
                        <h3 style="color: #1976D2; margin-top: 0;">üìã 1. Categor√≠as</h3>
                        <p style="margin: 10px 0; line-height: 1.6;">Define los grupos de edad de los nadadores (Ej: Sub-10, Sub-12, Juvenil, etc.)</p>
                        <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>‚ûï Agregar Categor√≠a:</strong> Crea una nueva categor√≠a</li>
                            <li><strong>‚úèÔ∏è Editar:</strong> Modifica el nombre de una categor√≠a</li>
                            <li><strong>üóëÔ∏è Eliminar:</strong> Borra una categor√≠a (cuidado!)</li>
                        </ul>
                    </div>

                    <!-- Pruebas -->
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #FF9800;">
                        <h3 style="color: #F57C00; margin-top: 0;">üèÅ 2. Eventos/Pruebas</h3>
                        <p style="margin: 10px 0; line-height: 1.6;">Configura las competencias (Ej: 50m Libre, 100m Espalda, Relevo 4x50, etc.)</p>
                        <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>‚ûï Agregar Evento:</strong> Crea una nueva prueba y as√≠gnala a una categor√≠a</li>
                            <li><strong>üîç Buscar:</strong> Filtra pruebas por nombre</li>
                            <li><strong>‚úèÔ∏è Editar:</strong> Cambia el nombre o categor√≠a</li>
                        </ul>
                    </div>

                    <!-- Participantes -->
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #9C27B0;">
                        <h3 style="color: #7B1FA2; margin-top: 0;">üë§ 3. Participantes</h3>
                        <p style="margin: 10px 0; line-height: 1.6;">Registra todos los nadadores que competir√°n (nombre, club, g√©nero)</p>
                        <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>‚ûï Agregar Participante:</strong> Registra un nuevo nadador</li>
                            <li><strong>üîç Buscar:</strong> Encuentra por nombre o club</li>
                            <li><strong>‚úèÔ∏è Editar:</strong> Actualiza datos del nadador</li>
                        </ul>
                    </div>
                </div>

                <!-- Notas Importantes -->
                <div style="background: white; padding: 20px; border-radius: 8px; margin-top: 20px; border: 2px solid #FFC107;">
                    <h3 style="color: #F57F17; margin-top: 0;">‚ö° Consejos Importantes</h3>
                    <ul style="line-height: 2;">
                        <li>‚úÖ <strong>Primero</strong> crea las categor√≠as</li>
                        <li>‚úÖ <strong>Luego</strong> crea los eventos/pruebas para cada categor√≠a</li>
                        <li>‚úÖ <strong>Despu√©s</strong> registra los participantes</li>
                        <li>‚úÖ Finalmente usa el <strong>Panel de Control</strong> para inscribir nadadores y registrar tiempos</li>
                        <li>‚ö†Ô∏è Haz <strong>backups regularmente</strong> - Los datos se guardan en el navegador!</li>
                        <li>üí° Usa "Generar Datos Completos" solo para <strong>probar el sistema</strong></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="background: linear-gradient(135deg, #2E7D32, #1B5E20); color: white; padding: 30px 20px; margin-top: 40px; text-align: center;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h3 style="margin: 0 0 10px 0; font-size: 1.5em;">üèä Olimpiadas R√≠o de Oro 2025</h3>
            <p style="margin: 5px 0; opacity: 0.9;">Sistema de Gesti√≥n de Competencias de Nataci√≥n</p>
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3);">
                <p style="margin: 0; font-size: 0.85em; opacity: 0.7;">Desarrollado con ‚ù§Ô∏è para la comunidad deportiva</p>
            </div>
        </div>
    </footer>

    <!-- Import Modal -->
    <div id="importModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 10px; max-width: 500px; width: 90%;">
            <h2 style="margin-top: 0; color: #1976D2;">üì§ Importar Backup</h2>
            <p>Selecciona un archivo JSON exportado anteriormente:</p>
            <input type="file" id="importFileInput" accept=".json" style="width: 100%; padding: 10px; margin: 15px 0; border: 2px solid #2196F3; border-radius: 5px;">
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="handleImport()" class="btn" style="flex: 1; background: #2196F3; color: white; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                    Importar
                </button>
                <button onclick="closeImportModal()" class="btn" style="flex: 1; background: #757575; color: white; padding: 12px; border: none; border-radius: 5px; cursor: pointer;">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/database.js"></script>
    <script src="js/event-data.js"></script>
    <script src="js/sportland-participants-importer.js"></script>
    <script src="js/setup-complete-event.js"></script>
    <script src="js/test-data-generator.js"></script>
    <script src="js/export.js"></script>
    <script src="js/app.js"></script>
    
    <script>
        // Modal de importaci√≥n
        function showImportModal() {
            document.getElementById('importModal').style.display = 'flex';
        }

        function closeImportModal() {
            document.getElementById('importModal').style.display = 'none';
            document.getElementById('importFileInput').value = '';
        }

        async function handleImport() {
            const fileInput = document.getElementById('importFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('‚ö†Ô∏è Por favor selecciona un archivo');
                return;
            }

            try {
                await DataExporter.importJSON(file);
                alert('‚úÖ Datos importados exitosamente!');
                closeImportModal();
                location.reload();
            } catch (error) {
                alert('‚ùå Error al importar: ' + error);
            }
        }
    </script>
</body>
</html>
